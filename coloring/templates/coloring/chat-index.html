{% load static %}

<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Chat Tool</title>
	<script type="text/javascript" src="{% static 'coloring/vendors/jquery/jquery-3.3.1.min.js' %}"></script>
	<script type="text/javascript" src="{% static 'coloring/vendors/paper/paper-full.min.js' %}"></script>
  <link href="{% static 'coloring/vendors/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet" type="text/css" />
  
  <style type="text/css">
    #myCanvas {
      border: 1px solid black;
    }
  </style>
  
</head>
<body>

  <div class="container">
    
    <div class="row">
      <div class="col-12">

        <!-- the brackets around author.name indicate getting the property name from the author variable passed from coloring/views.py -->
        <h4>Chat Tool</h4>
        <div id="chat-area" width="350px" height="350px"></div>
        <input id="user">
        <input id="textMsg">
        <button class="btn btn-primary btn-large" id="send">Send</button>
        
        <br></br>
        
        
    </div>
    </div>
  </div>
  <script>
    
    window.onload = function() {

      var points = []; 
      
      
        
     
        // Establish websocket connection
        var socket = new WebSocket("wss://ws-server-template.ashriftman.repl.co", "very-good-protocol");

        socket.onopen = function(){

          
 
        }
        socket.onmessage = function(message){
          
         // Receive a message from websocket server
          var msg = message.data.text;
          var usr = message.data.user;
          var chatArea = $("#chat-area")
          var textNode = document.createElement("div");
          textNode.id = "chat-msg";
          textNode.innerHTML = msg + "  ";
          chatArea.append(textNode);
         
        }
        
        socket.onclose = function(){
        
        }
        
        
       $( "#send" ).click(function() {
      alert( "Handler for send called." );
      var msg = $('#textMsg').innerHTML;
         var usr = $('#user').innerHTML;
      socket.send({text: msg, user:usr});
       });
        

      }


      
      
  

</script>
</body>
</html>
